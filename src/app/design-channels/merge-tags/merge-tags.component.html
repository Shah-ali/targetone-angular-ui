<div class="modal-header">
  <h5 class="modal-title" id="exampleModalLabel">
    <span>{{ 'designEditor.beeEditorComponent.mergeTaglbl' | translate }}</span>
  </h5>
  <button type="button" class="close" (mousedown)="onClose()" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  <div class="col-12 p-0">
    <label>{{ 'designEditor.offerDrawerComponent.selectTagTypelbl' | translate }}</label>
    <select class="form-control shadow-none borderinput" id="type" (change)="dropDownChanged($event)">
      <option *ngFor="let item of mTagsWithoutoptgroup" [value]="item.id">{{ item.text }}</option>
      <optgroup *ngFor="let typeGroup of selectGroupOptDME" [label]="typeGroup.type">
        <option *ngFor="let item of typeGroup.group" [value]="item.id">{{ item.text }}</option>
      </optgroup>
    </select>
    <div class="mt-3"></div>
    <label>{{ 'mergeTagsComponent.selectAttributeLbl' | translate }}</label>
    <select *ngIf="!isDmeModel" class="form-control shadow-none" id="property" [(ngModel)]="tagDetails">
      <option *ngFor="let item2 of filteredOptions" [ngValue]="item2">{{ item2.name }}</option>
    </select>

    <div *ngIf="isFreeStyleSelectedTag[selectedType] && isDmeModel; else FixedparamsCtr">
      <select
        *ngIf="isDmeModel"
        class="form-control shadow-none"
        id="property"
        [(ngModel)]="tagDetails"
        (change)="selectProperty($event)">
        <option *ngFor="let item2 of filteredOptions" value="{{ item2.name }}">
          <span *ngIf="item2.name">{{ item2.name }}</span>
          <span *ngIf="!item2.name">{{ item2.text }}</span>
        </option>
      </select>
    </div>
    <ng-template #FixedparamsCtr>
      <select
        *ngIf="isDmeModel"
        class="form-control shadow-none"
        id="property"
        [(ngModel)]="tagDetails"
        (change)="selectProperty($event)">
        <option *ngFor="let item2 of filteredOptions" value="{{ item2.value }}">
          <span *ngIf="item2.name">{{ item2.name }}</span>
          <span *ngIf="!item2.name">{{ item2.text }}</span>
        </option>
      </select>
    </ng-template>

    <div *ngIf="isFreeStyleSelectedTag[selectedType] && isDmeModel; else checkEventArrayType">
      <div class="mergeTagExt-dropdown mt-3">
        <div class="search-input-box" (click)="openExtDropdown()">
          <div class="selectedTagLabel one">{{ '{' + selectedTag + '}' }}</div>

          <i class="far" [class.fa-angle-down]="!showExtDropdown" [class.fa-angle-up]="showExtDropdown"></i>
        </div>
        <ul *ngIf="showExtDropdown">
          <ng-container *ngFor="let childObj of selectedTagOptions">
            <li (click)="selectExtOption(childObj)">
              <span>{{ childObj }}</span>
            </li>
          </ng-container>
        </ul>
      </div>
    </div>

    <ng-template #checkEventArrayType>
      <div class="mt-3" *ngIf="isDmeModel && showEventArrayType; else SelectTagInputContainer">
        <label>{{ 'mergeTagsComponent.selectedtagLbl' | translate }}</label>
        <div class="selectedTagLabel two">
          <span>{{ '{' + selectedTag + '}' }}</span>
          <i
          class="far fa-copy"
          #t40="ngbTooltip"
          triggers="manual"
          ngbTooltip="{{'productRecoAdvanceComponent.copiedTextFromMergeTagLbl' | translate}}"
          (click)="copyToPasteInstant(t40, selectedTag, false)"
          placement="right"></i>
        </div>
        <div class="selectedTagLabel two">
          <span>{{ '{' + selectedTag + '[0]}' }}</span>
          <i
          class="far fa-copy"
          #t41="ngbTooltip"
          triggers="manual"
          ngbTooltip="{{'productRecoAdvanceComponent.copiedTextFromMergeTagLbl' | translate}}"
          (click)="copyToPasteInstant(t41, selectedTag, true)"
          placement="right"></i>
        </div>
      </div>
    </ng-template>


    <ng-template #SelectTagInputContainer>
      <div class="mt-3" *ngIf="isDmeModel">
        <label>{{ 'mergeTagsComponent.selectedtagLbl' | translate }}</label>
        <div class="selectedTagLabel three">{{ '{' + selectedTag + '}' }}</div>
      </div>
    </ng-template>
  </div>
</div>
<div class="modal-footer d-flex justify-content-right">
  <button type="button" class="btn buttonCss shadow-none m-0 mr-2" id="closeBtn" (click)="onClose()">
    {{ 'close' | translate }}
  </button>
  <button *ngIf="!isDmeModel" type="submit" class="btn buttonPrimaryCss shadow-none m-0" (click)="getSelectedTag()">
    {{ 'designEditor.selectlbl' | translate }}
  </button>
  <button *ngIf="isDmeModel" type="submit" class="btn buttonPrimaryCss shadow-none m-0" (click)="copyToPaste()">
    {{ 'copy' | translate }}
  </button>
</div>
